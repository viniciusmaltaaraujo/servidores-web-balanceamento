services:  # Define os ‚Äúservi√ßos‚Äù, ou seja, os cont√™ineres que o Docker vai orquestrar.

  # =========================================================
  # üß± SERVI√áO 1 ‚Äì Apache HTTP Server
  # =========================================================
  apache:
    build:  # Em vez de usar uma imagem pronta, esse servi√ßo ser√° constru√≠do com base em um Dockerfile local.
      context: .  # O ponto (.) indica que o contexto de build √© o diret√≥rio atual, onde est√° o Dockerfile.
      dockerfile: Dockerfile.apache  # Nome do arquivo Dockerfile que ser√° usado para montar a imagem.
    container_name: apache-server  # Nome fixo que o cont√™iner vai receber, √∫til para identificar durante testes e logs.

    ports:
      - "8080:80"  # Faz o mapeamento de portas: acessamos via http://localhost:8080, e o tr√°fego √© redirecionado para a porta 80 do cont√™iner.

    volumes:
      - ./apache/html:/usr/local/apache2/htdocs:ro  # Monta o diret√≥rio local ./apache/html dentro do cont√™iner, no local onde ficam as p√°ginas do Apache.
                                                    # O sufixo ":ro" significa "read-only" (somente leitura), evitando que o cont√™iner altere os arquivos locais.
      - ./apache/logs:/usr/local/apache2/logs       # Monta a pasta local ./apache/logs para guardar os logs gerados dentro do cont√™iner.

    restart: unless-stopped  # Faz o cont√™iner reiniciar automaticamente se cair, a menos que seja parado manualmente.

  # =========================================================
  # üåê SERVI√áO 2 ‚Äì Nginx Web Server
  # =========================================================
  nginx-web:
    image: nginx:1.25.3-alpine  # Usa a imagem oficial do Nginx, vers√£o 1.25.3 baseada no Alpine (mais leve e r√°pida para desenvolvimento).
    container_name: meu-nginx-hands-on  # Nome fixo para o cont√™iner do Nginx.

    ports:
      - "8088:80"  # Exposi√ß√£o padr√£o do Nginx (porta HTTP principal).
      - "8081:81"  # Exemplo adicional para expor outro site ou configura√ß√£o ‚Äî √≥timo para comparar comportamentos ou hosts virtuais.

    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro  # Monta o arquivo principal de configura√ß√£o do Nginx.
      - ./nginx/conf.d/:/etc/nginx/conf.d/:ro        # Monta o diret√≥rio onde ficam os blocos de configura√ß√£o dos sites (virtual hosts).
      - ./html1:/usr/share/nginx/html1:ro            # Monta uma pasta local com conte√∫do est√°tico (site 1).
      - ./html2:/usr/share/nginx/html2:ro            # Monta outra pasta local (site 2), √∫til para comparar comportamentos.
                                                     # Ambas est√£o em modo somente leitura por seguran√ßa.

    restart: unless-stopped  # Reinicia automaticamente o cont√™iner em caso de falha.

