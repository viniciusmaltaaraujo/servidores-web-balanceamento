# Este arquivo é o principal de configuração do Apache.
# Precisamos garantir que os módulos necessários estejam carregados e que o AllowOverride seja global ou para /var/www/html.

# Carregamento de módulos essenciais para o Hands-on
# A imagem php:8.2-apache já carrega muitos deles, mas podemos garantir.
# LoadModule rewrite_module modules/mod_rewrite.so # Já carregado
# LoadModule cache_module modules/mod_cache.so     # Pode precisar ser habilitado
# LoadModule cache_disk_module modules/mod_cache_disk.so # Pode precisar ser habilitado
# LoadModule headers_module modules/mod_headers.so # Pode precisar ser habilitado

# Diretórios padrão do Apache (garantir que AllowOverride esteja em All para /var/www/)
<Directory "/var/www/html">
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
</Directory>


# Configurações de Cache do Apache (mod_cache)
# É necessário garantir que mod_cache e mod_cache_disk (ou socache) estejam carregados
# e que o CacheRoot tenha permissão de escrita.
# A imagem php:8.2-apache pode precisar de ajustes para cache em disco.
# <IfModule mod_cache.c>
#    CacheRoot "/var/cache/apache2"
#    CacheEnable disk /
#    CacheDirLevels 2
#    CacheDirLength 1
#    CacheMaxFileSize 10485760 # 10MB
#    CacheMaxExpire 600 # 10 minutes
#    CacheLastModifiedFactor 0.1
# </IfModule>

# Inclui configurações de Virtual Hosts (já vem por padrão)
IncludeOptional sites-enabled/*.conf