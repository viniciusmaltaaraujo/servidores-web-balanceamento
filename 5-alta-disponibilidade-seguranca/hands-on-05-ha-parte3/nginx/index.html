<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üîí ModSecurity Lab</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; background: #f5f5f5; color: #333; }
    .container { max-width: 900px; margin: 0 auto; background: #fff; padding: 30px; border-radius: 10px; box-shadow: 0 2px 12px rgba(0,0,0,.1); }
    h1 { color: #222; }
    .note { background:#fff8e1; border-left: 5px solid #ff9800; padding:14px; margin:18px 0; border-radius:6px; }
    .success { background: #e8f5e9; border-left: 5px solid #4caf50; padding:14px; margin:18px 0; border-radius:6px; }
    .danger { background: #ffebee; border-left: 5px solid #f44336; padding:14px; margin:18px 0; border-radius:6px; }
    pre { background:#fafafa; padding:12px; border-radius:6px; overflow:auto; }
    code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; }
  </style>
</head>
<body>
  <div class="container">
    <h1>üîí ModSecurity + Nginx Security Lab</h1>
    <p>Bem-vindo! üöÄ Sua aplica√ß√£o de teste est√° <b>rodando</b> no container.</p>

    <div class="note">
      üí° <b>Nota:</b> Este laborat√≥rio √© apenas uma simula√ß√£o. O arquivo <code>test-app.php</code> n√£o roda PHP de verdade ‚Äî
      o Nginx responde sempre com <code>PHP processado: ...</code>.  
      O objetivo √© que o <b>ModSecurity</b> intercepte e bloqueie os ataques durante os testes.
    </div>

    <div class="success">
      ‚úÖ A aplica√ß√£o est√° <b>ativa</b>.  
      Para validar as prote√ß√µes, use os comandos abaixo no <b>terminal (cURL)</b>.
    </div>

    <h2>üìä Comandos de Teste via cURL</h2>
    <p>Copie e execute no terminal conforme seu sistema:</p>

    <h3>üîπ Linux / macOS</h3>
    <pre><code># Requisi√ß√£o normal
curl "http://localhost:8080/"

# SQL Injection (deve ser bloqueado - 403)
curl "http://localhost:8080/?id=1' OR '1'='1"

# XSS (deve ser bloqueado - 403)
curl "http://localhost:8080/?search=%3Cscript%3Ealert('xss')%3C%2Fscript%3E"

# User-Agent malicioso (deve ser bloqueado - 403)
curl -H "User-Agent: sqlmap/1.0" "http://localhost:8080/"

# Rate limit (primeiras 200, depois 429)
for i in {1..15}; do curl -s -o /dev/null -w "%{http_code}\\n" http://localhost:8080/api/; done
</code></pre>

    <h3>üîπ Windows PowerShell</h3>
    <pre><code># Requisi√ß√£o normal
curl.exe "http://localhost:8080/"

# SQL Injection (usar %27 no lugar de ')
curl.exe "http://localhost:8080/?id=1%27%20OR%20%271%27%3D%271"

# XSS (deve ser bloqueado - 403)
curl.exe "http://localhost:8080/?search=%3Cscript%3Ealert('xss')%3C%2Fscript%3E"

# User-Agent malicioso (deve ser bloqueado - 403)
curl.exe -H "User-Agent: sqlmap/1.0" "http://localhost:8080/"

# Rate limit (primeiras 200, depois 503)
1..15 | % { curl.exe -s -o $null -w "Status: %{http_code}`n" http://localhost:8080/api/ }
</code></pre>

    <div class="danger">
      ‚ö†Ô∏è Alguns testes n√£o podem ser feitos via navegador (ex.: User-Agent malicioso).  
      Use o terminal para validar todos os cen√°rios corretamente.
    </div>
  </div>
</body>
</html>
